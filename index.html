<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>经典诵读助手 - 完整版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans CJK SC', 'Microsoft YaHei', '微软雅黑', sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* 书籍网格 */
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .book-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .book-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .book-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        .book-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .book-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #888;
        }

        /* 章节内容区域 */
        .reading-area {
            display: none;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .reading-header {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .current-book-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .back-button {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.3);
        }

        .chapter-info {
            display: none;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .chapter-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .chapter-subtitle {
            color: #666;
            font-size: 0.9rem;
        }

        .chapter-content {
            display: none;
            padding: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333;
            min-height: 400px;
            white-space: pre-wrap;
        }

        /* 进度显示 */
        .reading-progress {
            display: none;
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        /* 操作按钮 */
        .stamp-actions {
            display: none;
            padding: 20px;
            text-align: center;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .action-button {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .action-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-title {
            font-size: 1.5rem;
            color: #333;
            margin: 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            height: 200px;
            resize: vertical;
            font-family: inherit;
        }

        .modal-actions {
            text-align: right;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }

        .modal-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s ease;
        }

        .modal-button:hover {
            background: #5a6fd8;
        }

        .modal-button.secondary {
            background: #6c757d;
        }

        .modal-button.secondary:hover {
            background: #5a6268;
        }

        /* 空状态 */
        .empty-state {
            text-align: center;
            color: white;
            padding: 60px 20px;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .empty-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .empty-description {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 30px;
        }

        /* 庆祝动画 */
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 215, 0, 0.95);
            color: #333;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(255, 215, 0, 0.3);
            z-index: 1001;
            display: none;
        }

        .celebration.show {
            display: block;
            animation: celebrationPop 0.6s ease-out;
        }

        @keyframes celebrationPop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .celebration-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .celebration-text {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .celebration-subtitle {
            font-size: 1rem;
            opacity: 0.8;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .book-grid {
                grid-template-columns: 1fr;
            }

            .reading-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .chapter-content {
                padding: 20px;
                font-size: 1rem;
            }

            .modal-content {
                margin: 10% auto;
                padding: 20px;
                width: 95%;
            }
        }

        /* 章节导航 */
        .chapter-nav {
            display: none;
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .nav-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .nav-button:hover {
            background: #5a6fd8;
        }

        .nav-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .chapter-indicator {
            font-size: 0.9rem;
            color: #666;
        }

        /* 书籍操作按钮 */
        .book-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .book-card:hover .book-actions {
            opacity: 1;
        }

        .book-action-btn {
            background: rgba(102, 126, 234, 0.9);
            color: white;
            border: none;
            padding: 6px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-left: 5px;
            transition: all 0.3s ease;
        }

        .book-action-btn:hover {
            background: rgba(102, 126, 234, 1);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📚 经典诵读助手</h1>
            <p>传承经典，智慧人生 - 100遍诵读成就</p>
        </div>

        <!-- 书籍网格 -->
        <div id="book-grid" class="book-grid"></div>

        <!-- 空状态 -->
        <div id="empty-state" class="empty-state" style="display: none;">
            <div class="empty-icon">📖</div>
            <div class="empty-title">还没有添加任何书籍</div>
            <div class="empty-description">
                点击下方按钮添加经典书籍，开始您的诵读之旅
            </div>
            <button class="action-button" onclick="openModal('add-book-modal')">
                ➕ 添加书籍
            </button>
        </div>

        <!-- 诵读区域 -->
        <div id="reading-area" class="reading-area">
            <div class="reading-header">
                <div>
                    <div id="current-book-title" class="current-book-title"></div>
                </div>
                <button class="back-button" onclick="showBookList()">
                    ← 返回书库
                </button>
            </div>

            <div id="chapter-info" class="chapter-info">
                <div id="chapter-title" class="chapter-title"></div>
                <div id="chapter-subtitle" class="chapter-subtitle"></div>
            </div>

            <div id="chapter-nav" class="chapter-nav">
                <div class="nav-controls">
                    <button id="prev-chapter" class="nav-button" onclick="navigateChapter(-1)">
                        ← 上一章
                    </button>
                    <div class="chapter-indicator">
                        <span id="current-chapter">第 1 章</span>
                        <span id="total-chapters">共 1 章</span>
                    </div>
                    <button id="next-chapter" class="nav-button" onclick="navigateChapter(1)">
                        下一章 →
                    </button>
                </div>
            </div>

            <div id="chapter-content" class="chapter-content"></div>

            <div id="reading-progress" class="reading-progress">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div id="progress-text" class="progress-text"></div>
            </div>

            <div id="stamp-actions" class="stamp-actions">
                <button id="stamp-button" class="action-button" onclick="addStamp()">
                    📝 标记已读
                </button>
                <button id="re-read-button" class="action-button" style="display: none;" onclick="startReReading()">
                    🔄 开始重读
                </button>
            </div>
        </div>
    </div>

    <!-- 添加书籍模态框 -->
    <div id="add-book-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">添加经典书籍</h3>
            </div>
            <div class="form-group">
                <label class="form-label">书籍名称</label>
                <input type="text" id="book-name" class="form-input" placeholder="请输入书籍名称" maxlength="50">
            </div>
            <div class="form-group">
                <label class="form-label">书籍内容</label>
                <textarea id="book-content" class="form-textarea" placeholder="请输入或粘贴书籍内容

📖 使用说明：
1. 完整粘贴您的文章内容
2. 网页将自动智能分章：
   • 使用 ----- 或 ==== 作为手动分章标记
   • 自动按中文标点符号分句
   • 自动按英文标点符号分句
   • 每3-5句自动组成一章
3. 如需特殊分章，请添加 ----- 或 ==== 分隔符
4. 系统会自动检测最佳分章方式
5. 无需担心格式，网页会智能处理"></textarea>
            </div>
            <div class="modal-actions">
                <button class="modal-button secondary" onclick="closeModal('add-book-modal')">取消</button>
                <button class="modal-button" onclick="addBook()">确认添加</button>
            </div>
        </div>
    </div>

    <!-- 庆祝动画 -->
    <div id="celebration" class="celebration">
        <div class="celebration-icon">🎉</div>
        <div class="celebration-text">恭喜完成100遍诵读！</div>
        <div class="celebration-subtitle">可以开始重读了</div>
    </div>

    <script>
        // 全局变量
        let books = JSON.parse(localStorage.getItem('books')) || [];
        let currentBook = null;
        let currentChapter = null;
        let currentChapterIndex = 0;
        let reReading = false;

        // 经典文本数据库 - 优化版本
        const classicDatabase = {
            '道德经': {
                chapters: [
                    { title: '第一章', content: '道可道也，非恒道也；名可名也，非恒名也。无名天地之始也，有名万物之母也。故恒无欲也，以观其妙；恒有欲也，以观其所徼。两者同出，异名同谓。玄之又玄，众妙之门。' },
                    { title: '第二章', content: '天下皆知美之为美，斯恶已；皆知善之为善，斯不善已。有无之相生也，难易之相成也，长短之相形也，高下之相盈也，音声之相和也，先后之相随，恒也。是以圣人居无为之事，行不言之教。万物作而弗始也，为而弗志也，成功而弗居也。夫唯弗居，是以弗去。' },
                    { title: '第三章', content: '不尚贤，使民不争；不贵难得之货，使民不为盗；不见可欲，使民心不乱。是以圣人之治，虚其心，实其腹，弱其志，强其骨。恒使民无知无欲也，使夫知不敢弗为而已，则无不治矣。' },
                    { title: '第四章', content: '道冲而用之或不盈，渊兮似万物之宗。挫其锐，解其纷，和其光，同其尘。湛兮似或存。吾不知谁之子，象帝之先。' },
                    { title: '第五章', content: '天地不仁，以万物为刍狗；圣人不仁，以百姓为刍狗。天地之间，其犹橐乎！虚而不屈，动而俞出。多言数穷，不如守中。' },
                    { title: '第六章', content: '谷神不死，是谓玄牝。玄牝之门，是谓天地根。绵绵若存，用之不勤。' },
                    { title: '第七章', content: '天长，地久。天地之所以能长且久者，以其不自生也，故能长生。是以圣人后其身而身先，外其身而身存。非以其无私邪？故能成其私。' },
                    { title: '第八章', content: '上善若水。水善利万物而不争，处众人之所恶，故几于道。居善地，心善渊，与善仁，言善信，政善治，事善能，动善时。夫唯不争，故无尤。' },
                    { title: '第九章', content: '持而盈之，不如其已；揣而锐之，不可长保。金玉满堂，莫之能守；富贵而骄，自遗其咎。功遂身退，天之道也。' },
                    { title: '第十章', content: '载营魄抱一，能无离乎？专气致柔，能婴儿乎？涤除玄览，能无疵乎？爱民治国，能无知乎？天门开阖，能无雌乎？明白四达，能无知乎？生之，畜之；生而不有，为而不恃，长而不宰，是谓玄德。' },
                    { title: '第十一章', content: '三十辐共一毂，当其无，有车之用也。埏埴以为器，当其无，有器之用也。凿户牖以为室，当其无，有室之用也。故有之以为利，无之以为用。' },
                    { title: '第十二章', content: '五色令人目盲；五音令人耳聋；五味令人口爽；驰骋畋猎令人心发狂；难得之货令人行妨。是以圣人为腹不为目，故去彼取此。' },
                    { title: '第十三章', content: '宠辱若惊，贵大患若身。何谓宠辱若惊？宠为下，得之若惊，失之若惊，是谓宠辱若惊。何谓贵大患若身？吾所以有大患者，为吾有身也；及吾无身，吾有何患？故贵以身为天下，若可寄天下；爱以身为天下，若可托天下。' },
                    { title: '第十四章', content: '视之而弗见，名之曰微；听之而弗闻，名之曰希；捪之而弗得，名之曰夷。三者不可致诘，故混而为一。其上不谬，其下不忽。绳绳兮不可名，复归于物。是谓无状之状，无物之象，是谓忽恍。迎之不见其首，随之不见其后。执古之道，以御今之有。能知古始，是谓道纪。' },
                    { title: '第十五章', content: '古之善为道者，微妙玄通，深不可识。夫唯不可识，故强为之容：豫兮若冬涉川；犹兮若畏四邻；俨兮其若客；涣兮其若凌释；敦兮其若朴；旷兮其若谷；混兮其若浊；孰能浊以静之徐清？孰能安以动之徐生？保此道者，不欲盈。夫唯不盈，故能蔽而新成。' },
                    { title: '第十六章', content: '致虚极，守静笃。万物并作，吾以观复。夫物芸芸，各复归其根。归根曰静，静曰复命。复命曰常，知常曰明。不知常，妄作凶。知常容，容乃公，公乃全，全乃天，天乃道，道乃久，没身不殆。' },
                    { title: '第十七章', content: '太上，下知有之。其次亲而誉之。其次畏之。其次侮之。信不足焉，有不信焉。悠兮其贵言。功成事遂，百姓皆谓我自然。' },
                    { title: '第十八章', content: '大道废，有仁义；智慧出，有大伪；六亲不和，有孝慈；国家昏乱，有忠臣。' },
                    { title: '第十九章', content: '绝圣弃智，民利百倍；绝仁弃义，民复孝慈；绝巧弃利，盗贼无有。此三者以为文不足，故令有所属：见素抱朴，少私寡欲，绝学无忧。' },
                    { title: '第二十章', content: '唯之与阿，相去几何？美之与恶，相去何若？人之所畏，不可不畏。荒兮其未央哉！众人熙熙，如享太牢，如春登台。我独泊兮其未兆，混沌兮如婴儿之未孩；傫傫兮若无所归。众人皆有余，而我独若遗。我愚人之心也哉！俗人昭昭，我独昏昏。俗人察察，我独闷闷。澹兮其若海，飂兮若无止。众人皆有以，而我独顽且鄙。我独异於人，而贵食母。' },
                    { title: '第二十一章', content: '孔德之容，唯道是从。道之为物，唯恍唯忽。忽恍中有象，恍忽中有物。窈冥中有精，其精甚真，其中有信。自古及今，其名不去，以阅众甫。吾何以知众甫之状哉？以此。' },
                    { title: '第二十二章', content: '曲则全，枉则直，洼则盈，敝则新，少则得，多则惑。是以圣人抱一为天下式。不自见故明，不自是故彰，不自伐故有功，不自矜故长。夫唯不争，故天下莫能与之争。古之所谓曲则全者，岂虚言哉！诚全而归之。' },
                    { title: '第二十三章', content: '希言自然。故飘风不终朝，骤雨不终日。孰为此者？天地。天地尚不能久，而况於人乎？故从事於道者同於道，德者同於德，失者同於失。同於道者，道亦乐得之；同於德者，德亦乐得之；同於失者，失亦乐得之。信不足焉，有不信焉。' },
                    { title: '第二十四章', content: '企者不立；跨者不行；自见者不明；自是者不彰；自伐者无功；自矜者不长。其在道也，曰余食赘形。物或恶之，故有道者不处。' },
                    { title: '第二十五章', content: '有物混成，先天地生。寂兮寥兮，独立而不改，周行而不殆，可以为天地母。吾不知其名，强字之曰道，强为之名曰大。大曰逝，逝曰远，远曰反。故道大，天大，地大，王亦大。域中有四大，而王居其一焉。人法地，地法天，天法道，道法自然。' },
                    { title: '第二十六章', content: '重为轻根，静为躁君。是以君子终日行不离辎重，虽有荣观，燕处超然。奈何万乘之主，而以身轻天下？轻则失根，躁则失君。' },
                    { title: '第二十七章', content: '善行无辙迹；善言无瑕谪；善计不用筹策；善闭无关楗而不可开；善结无绳约而不可解。是以圣人常善救人，故无弃人；常善救物，故无弃物。是谓袭明。故善人者，不善人之师；不善人者，善人之资。不贵其师，不爱其资，虽智大迷，是谓要妙。' },
                    { title: '第二十八章', content: '知其雄，守其雌，为天下溪。为天下溪，常德不离，复归于婴儿。知其白，守其黑，为天下式。为天下式，常德不忒，复归于无极。知其荣，守其辱，为天下谷。为天下谷，常德乃足，复归于朴。朴散则为器，圣人用之，则为官长，故大制不割。' },
                    { title: '第二十九章', content: '将欲取天下而为之，吾见其不得已。天下神器，不可为也，不可执也。为者败之，执者失之。是以圣人无为故无败，无执故无失。夫物或行或随；或嘘或吹；或强或羸；或载或隳。是以圣人去甚，去奢，去泰。' },
                    { title: '第三十章', content: '以道佐人主者，不以兵强天下。其事好还。师之所处，荆棘生焉。大军之后，必有凶年。善有果而已，不以取强。果而勿矜，果而勿伐，果而勿骄。果而勿强，是谓不道。物壮则老，是谓不道，不道早已。' },
                    { title: '第三十一章', content: '夫佳兵者，不祥之器，物或恶之，故有道者不处。君子居则贵左，用兵则贵右。兵者不祥之器，非君子之器，不得已而用之，恬淡为上。胜而不美，而美之者，是乐杀人。夫乐杀人者，则不可得志於天下矣。吉事尚左，凶事尚右。偏将军居左，上将军居右，言以丧礼处之。杀人之众，以悲哀泣之，战胜以丧礼处之。' },
                    { title: '第三十二章', content: '道常无名，朴虽小，天下莫能臣。侯王若能守之，万物将自宾。天地相合，以降甘露，民莫之令而自均。始制有名，名亦既有，夫亦将知止，知止所以不殆。督道之在天下，犹川谷之於江海。' },
                    { title: '第三十三章', content: '知人者智，自知者明。胜人者有力，自胜者强。知足者富，强行者有志。不失其所者久，死而不亡者寿。' },
                    { title: '第三十四章', content: '大道汜兮，其可左右。万物恃之而生而不辞，功成而不名有。衣养万物而不为主，常无欲，可名於小；万物归焉而不为主，可名为大。以其终不为大，故能成其大。' },
                    { title: '第三十五章', content: '执大象，天下往。往而不害，安平太。乐与饵，过客止。道之出口，淡乎其无味，视之不足见，听之不足闻，用之不足既。' },
                    { title: '第三十六章', content: '将欲歙之，必固张之；将欲弱之，必固强之；将欲废之，必固兴之；将欲取之，必固与之。是谓微明。柔弱胜刚强。鱼不可脱於渊，国之利器不可以示人。' },
                    { title: '第三十七章', content: '道常无为而无不为。侯王若能守之，万物将自化。化而欲作，吾将镇之以无名之朴。镇之以无名之朴，夫将不欲。不欲以静，天下将自正。' },
                    { title: '第三十八章', content: '上德不德，是以有德；下德不失德，是以无德。上德无为而无以为；下德无为而有以为。上仁为之而无以为；上义为之而有以为。上礼为之而莫之应，则攘臂而扔之。故失道而后德，失德而后仁，失仁而后义，失义而后礼。夫礼者，忠信之薄，而乱之首。前识者，道之华，而愚之始。是以大丈夫居其厚，不居其薄；居其实，不居其华。故去彼取此。' },
                    { title: '第三十九章', content: '昔之得一者：天得一以清；地得一以宁；神得一以灵；谷得一以盈；万物得一以生；侯王得一以为天下正。其致之也，谓天无以清，将恐裂；地无以宁，将恐发；神无以灵，将恐歇；谷无以盈，将恐竭；万物无以生，将恐灭；侯王无以正，将恐蹶。故贵以贱为本，高以下为基。是以侯王自称孤、寡、不谷。此非以贱为本邪？非乎？故至誉无誉。是故不欲琭琭如玉，珞珞如石。' },
                    { title: '第四十章', content: '反者道之动；弱者道之用。天下万物生于有，有生于无。' },
                    { title: '第四十一章', content: '上士闻道，勤而行之；中士闻道，若存若亡；下士闻道，大笑之。不笑不足以为道。故建言有之：明道若昧，进道若退，夷道若类，上德若谷，大白若辱，广德若不足，建德若偷，质真若渝，大方无隅，大器晚成，大音希声，大象无形，道隐无名。夫唯道，善贷且成。' },
                    { title: '第四十二章', content: '道生一，一生二，二生三，三生万物。万物负阴而抱阳，冲气以为和。人之所恶，唯孤、寡、不谷，而王公以为称。故物或损之而益，或益之而损。人之所教，我亦教之。强梁者不得其死，吾将以为教父。' },
                    { title: '第四十三章', content: '天下之至柔，驰骋天下之至坚。无有入无间，吾是以知无为之有益。不言之教，无为之益，天下希及之。' },
                    { title: '第四十四章', content: '名与身孰亲？身与货孰多？得与亡孰病？是故甚爱必大费；多藏必厚亡。知足不辱，知止不殆，可以长久。' },
                    { title: '第四十五章', content: '大成若缺，其用不弊。大盈若冲，其用不穷。大直若屈，大巧若拙，大辩若讷。躁胜寒，静胜热，清静为天下正。' },
                    { title: '第四十六章', content: '天下有道，却走马以粪；天下无道，戎马生于郊。祸莫大于不知足；咎莫大于欲得。故知足之足，常足矣。' },
                    { title: '第四十七章', content: '不出户，知天下；不窥牖，见天道。其出弥远，其知弥少。是以圣人不行而知，不见而明，不为而成。' },
                    { title: '第四十八章', content: '为学日益，为道日损。损之又损，以至于无为。无为而无不为。取天下常以无事，及其有事，不足以取天下。' },
                    { title: '第四十九章', content: '圣人无常心，以百姓心为心。善者，吾善之；不善者，吾亦善之；德善。信者，吾信之；不信者，吾亦信之；德信。圣人在天下，歙歙，为天下浑其心，百姓皆注其耳目，圣人皆孩之。' },
                    { title: '第五十章', content: '出生入死。生之徒，十有三；死之徒，十有三；人之生，动之死地，亦十有三。夫何故？以其生生之厚。盖闻善摄生者，陆行不遇兕虎，入军不被甲兵。兕无所投其角，虎无所措其爪，兵无所容其刃。夫何故？以其无死地。' },
                    { title: '第五十一章', content: '道生之，德畜之，物形之，势成之。是以万物莫不尊道而贵德。道之尊，德之贵，夫莫之命而常自然。故道生之，德畜之；长之育之；亭之毒之；养之覆之。生而不有，为而不恃，长而不宰，是谓玄德。' },
                    { title: '第五十二章', content: '天下有始，以为天下母。既得其母，以知其子；既知其子，复守其母，没身不殆。塞其兑，闭其门，终身不勤。开其兑，济其事，终身不救。见小曰明，守柔曰强。用其光，复归其明，无遗身殃；是为习常。' },
                    { title: '第五十三章', content: '使我介然有知，行於大道，唯施是畏。大道甚夷，而民好径。朝甚除，田甚芜，仓甚虚；服文彩，带利剑，厌饮食，财货有余；是为盗夸。非道也哉！' },
                    { title: '第五十四章', content: '善建者不拔，善抱者不脱，子孙以祭祀不辍。修之於身，其德乃真；修之於家，其德乃余；修之於乡，其德乃长；修之於国，其德乃丰；修之於天下，其德乃普。故以身观身，以家观家，以乡观乡，以国观国，以天下观天下。吾何以知天下然哉？以此。' },
                    { title: '第五十五章', content: '含德之厚，比於赤子。蜂虿虺蛇不螫，猛兽不据，攫鸟不搏。骨弱筋柔而握固。未知牝牡之合而朘作，精之至也。终日号而不嘎，和之至也。知和曰常，知常曰明，益生曰祥，心使气曰强。物壮则老，谓之不道，不道早已。' },
                    { title: '第五十六章', content: '知者不言，言者不知。塞其兑，闭其门，挫其锐，解其纷，和其光，同其尘，是谓玄同。故不可得而亲，不可得而疏；不可得而利，不可得而害；不可得而贵，不可得而贱。故为天下贵。' },
                    { title: '第五十七章', content: '以正治国，以奇用兵，以无事取天下。吾何以知其然哉？以此：天下多忌讳，而民弥贫；民多利器，国家滋昏；人多伎巧，奇物滋起；法令滋彰，盗贼多有。故圣人云：我无为，而民自化；我好静，而民自正；我无事，而民自富；我无欲，而民自朴。' },
                    { title: '第五十八章', content: '其政闷闷，其民淳淳；其政察察，其民缺缺。祸兮福之所倚，福兮祸之所伏。孰知其极？其无正也。正复为奇，善复为妖。人之迷，其日固久。是以圣人方而不割，廉而不刿，直而不肆，光而不耀。' },
                    { title: '第五十九章', content: '治人事天，莫若啬。夫唯啬，是谓早服；早服谓之重积德；重积德则无不克；无不克则莫知其极；莫知其极，可以有国；有国之母，可以长久。是谓深根固柢，长生久视之道。' },
                    { title: '第六十章', content: '治大国，若烹小鲜。以道莅天下，其鬼不神。非其鬼不神，其神不伤人。非其神不伤人，圣人亦不伤人。夫两不相伤，故德交归焉。' },
                    { title: '第六十一章', content: '大国者下流，天下之交，天下之牝。牝常以静胜牡，以静为下。故大国以下小国，则取小国；小国以下大国，则取大国。故或下以取，或下而取。大国不过欲兼畜人，小国不过欲入事人。夫两者各得其所欲，大者宜为下。' },
                    { title: '第六十二章', content: '道者万物之奥。善人之宝，不善人之所保。美言可以市，尊行可以加人。人之不善，何弃之有？故立天子，置三公，虽有拱璧以先驷马，不如坐进此道。古之所以贵此道者何？不曰：求以得，有罪以免邪？故为天下贵。' },
                    { title: '第六十三章', content: '为无为，事无事，味无味。大小多少，报怨以德。图难於其易，为大於其细；天下难事，必作於易，天下大事，必作於细。是以圣人终不为大，故能成其大。夫轻诺必寡信，多易必多难。是以圣人犹难之，故终无难矣。' },
                    { title: '第六十四章', content: '其安易持，其未兆易谋，其脆易泮，其微易散。为之於未有，治之於未乱。合抱之木，生於毫末；九层之台，起於累土；千里之行，始於足下。为者败之，执者失之。是以圣人无为故无败，无执故无失。民之从事，常於几成而败之。慎终如始，则无败事。是以圣人欲不欲，不贵难得之货；学不学，复众人之所过，以辅万物之自然而不敢为。' },
                    { title: '第六十五章', content: '古之善为道者，非以明民，将以愚之。民之难治，以其智多。故以智治国，国之贼；不以智治国，国之福。知此两者亦稽式。常知稽式，是谓玄德。玄德深矣，远矣，与物反矣，然后乃至大顺。' },
                    { title: '第六十六章', content: '江海之所以能为百谷王者，以其善下之，故能为百谷王。是以圣人欲上民，必以言下之；欲先民，必以身后之。是以圣人处上而民不重，处前而民不害。是以天下乐推而不厌。以其不争，故天下莫能与之争。' },
                    { title: '第六十七章', content: '天下皆谓我道大，似不肖。夫唯大，故似不肖。若肖，久矣其细也夫！我有三宝，持而保之。一曰慈，二曰俭，三曰不敢为天下先。慈故能勇；俭故能广；不敢为天下先，故能成器长。今舍慈且勇；舍俭且广；舍后且先；死矣！夫慈以战则胜，以守则固。天将救之，以慈卫之。' },
                    { title: '第六十八章', content: '善为士者，不武；善战者，不怒；善胜敌者，不与；善用人者，为之下。是谓不争之德，是谓用人之力，是谓配天古之极。' },
                    { title: '第六十九章', content: '用兵有言：吾不敢为主，而为客；不敢进寸，而退尺。是谓行无行；攘无臂；扔无敌；执无兵。祸莫大於轻敌，轻敌几丧吾宝。故抗兵相若，哀者胜矣。' },
                    { title: '第七十章', content: '吾言甚易知，甚易行。天下莫能知，莫能行。言有宗，事有君。夫唯无知，是以不我知。知我者希，则我者贵。是以圣人被褐而怀玉。' },
                    { title: '第七十一章', content: '知不知，上矣；不知知，病也。圣人不病，以其病病。夫唯病病，是以不病。' },
                    { title: '第七十二章', content: '民不畏威，则大威至。无狎其所居，无厌其所生。夫唯不厌，是以不厌。是以圣人自知不自见，自爱不自贵。故去彼取此。' },
                    { title: '第七十三章', content: '勇於敢则杀，勇於不敢则活。此两者，或利或害。天之所恶，孰知其故？是以圣人犹难之。天之道，不争而善胜，不言而善应，不召而自来，繟然而善谋。天网恢恢，疏而不失。' },
                    { title: '第七十四章', content: '民不畏死，奈何以死惧之？若使民常畏死，而为奇者，吾得执而杀之，孰敢？常有司杀者杀。夫代司杀者杀，是谓代大匠斫，夫代大匠斫者，稀有不伤其手矣。' },
                    { title: '第七十五章', content: '民之饥，以其上食税之多，是以饥。民之难治，以其上之有为，是以难治。民之轻死，以其求生之厚，是以轻死。夫唯无以生为者，是贤於贵生。' },
                    { title: '第七十六章', content: '人之生也柔弱，其死也坚强。草木之生也柔脆，其死也枯槁。故坚强者死之徒，柔弱者生之徒。是以兵强则灭，木强则折。强大处下，柔弱处上。' },
                    { title: '第七十七章', content: '天之道，其犹张弓与？高者抑之，下者举之；有余者损之，不足者补之。天之道，损有余而补不足。人之道，则不然，损不足以奉有余。孰能有余以奉天下，唯有道者。是以圣人为而不恃，功成而不处，其不欲见贤。' },
                    { title: '第七十八章', content: '天下莫柔弱於水，而攻坚强者莫之能胜，以其无以易之。弱之胜强，柔之胜刚，天下莫不知，莫能行。是以圣人云：受国之垢，是谓社稷主；受国之不祥，是谓天下王。正言若反。' },
                    { title: '第七十九章', content: '和大怨，必有余怨；报怨以德，安可以为善？是以圣人执左契，而不责於人。有德司契，无德司彻。天道无亲，常与善人。' },
                    { title: '第八十章', content: '小国寡民。使有什伯之器而不用；使民重死而不远徙。虽有舟舆，无所乘之，虽有甲兵，无所陈之。使人复结绳而用之。至治之极。甘其食，美其服，安其居，乐其俗。邻国相望，鸡犬之声相闻，民至老死，不相往来。' },
                    { title: '第八十一章', content: '信言不美，美言不信。善者不辩，辩者不善。知者不博，博者不知。圣人不积，既以为人己愈有，既以与人己愈多。天之道，利而不害；圣人之道，为而不争。' }
                ],
                description: '道家经典，老子的哲学著作，全书81章，分为道经37章和德经44章'
            },
            '易经': {
                chapters: [
                    { title: '乾卦', content: '乾：元，亨，利，贞。象曰：天行健，君子以自强不息。初九：潜龙勿用。九二：见龙在田，利见大人。九三：君子终日乾乾，夕惕若厉，无咎。九四：或跃在渊，无咎。九五：飞龙在天，利见大人。上九：亢龙有悔。' },
                    { title: '坤卦', content: '坤：元，亨，利，牝马之贞。君子有攸往，先迷后得主，利西南得朋，东北丧朋。安贞吉。象曰：地势坤，君子以厚德载物。初六：履霜，坚冰至。六二：直方大，不习无不利。六三：含章可贞。或从王事，无成有终。六四：括囊；无咎，无誉。六五：黄裳，元吉。上六：龙战于野，其血玄黄。' },
                    { title: '屯卦', content: '屯：元亨利贞，勿用，有攸往，利建侯。象曰：云雷屯，君子以经纶。初九：磐桓；利居贞，利建侯。六二：屯如邅如，乘马班如。匪寇婚媾，女子贞不字，十年乃字。六三：即鹿无虞，惟入于林中，君子几不如舍，往吝。六四：乘马班如，求婚媾，往吉，无不利。九五：屯其膏，小贞吉，大贞凶。上六：乘马班如，泣血涟如。' },
                    { title: '蒙卦', content: '蒙：亨。匪我求童蒙，童蒙求我。初筮告，再三渎，渎则不告。利贞。象曰：山下出泉，蒙；君子以果行育德。初六：发蒙，利用刑人，用说桎梏，以往吝。六二：包蒙吉；纳妇吉；子克家。六三：勿用娶女；见金夫，不有躬，无攸利。六四：困蒙，吝。六五：童蒙，吉。上九：击蒙；不利为寇，利御寇。' },
                    { title: '需卦', content: '需：有孚，光亨，贞吉。利涉大川。象曰：云上于天，需；君子以饮食宴乐。初九：需于郊。利用恒，无咎。九二：需于沙。小有言，终吉。九三：需于泥，致寇至。六四：需于血，出自穴。九五：需于酒食，贞吉。上六：入于穴，有不速之客三人来，敬之终吉。' },
                    { title: '讼卦', content: '讼：有孚，窒。惕中吉。终凶。利见大人，不利涉大川。象曰：天与水违行，讼；君子以作事谋始。初六：不永所事，小有言，终吉。九二：不克讼，归而逋其邑人三百户，无眚。六三：食旧德，贞厉，终吉，或从王事，无成。九四：不克讼，复即命渝，安贞吉。九五：讼元吉。上九：或锡之鞶带，终朝三褫之。' },
                    { title: '师卦', content: '师：贞，丈人吉，无咎。象曰：地中有水，师；君子以容民畜众。初六：师出以律，否臧凶。九二：在师中，吉无咎，王三锡命。六三：师或舆尸，凶。六四：师左次，无咎。六五：田有禽，利执言，无咎。长子帅师，弟子舆尸，贞凶。上六：大君有命，开国承家，小人勿用。' },
                    { title: '比卦', content: '比：吉。原筮元永贞，无咎。不宁方来，后夫凶。象曰：水在地上，比；先王以建万国，亲诸侯。初六：有孚比之，无咎。有孚盈缶，终来有他，吉。六二：比之自内，贞吉。六三：比之匪人。六四：外比之，贞吉。九五：显比，王用三驱，失前禽。邑人不诫，吉。上六：比之无首，凶。' },
                    { title: '小畜卦', content: '小畜：亨。密云不雨，自我西郊。象曰：风行天上，小畜；君子以懿文德。初九：复自道，何其咎，吉。九二：牵复，吉。九三：舆说辐，夫妻反目。六四：有孚，血去惕出，无咎。九五：富以其邻，上九：既雨既处，尚德载，妇贞厉。月几望，君子征凶。' },
                    { title: '履卦', content: '履：履虎尾，不咥人，亨。象曰：上天下泽，履；君子以辨上下，定民志。初九：素履之往。九二：履道坦坦，幽人贞吉。六三：眇能视，跛能履，履虎尾，咥人，凶。武人为于大君。九四：履虎尾，愬愬终吉。九五：夬履，贞厉。上九：视履考祥，其旋元吉。' }
                    // ... 继续添加剩余54卦
                ],
                description: '中国最古老的哲学典籍，被称为群经之首，共64卦'
            },
            '黄帝内经': {
                chapters: [
                    { title: '上古天真论篇第一', content: '昔在黄帝，生而神灵，弱而能言，幼而徇齐，长而敦敏，成而登天。乃问于天师曰：余闻上古之人，春秋皆度百岁，而动作不衰；今时之人，年半百而动作皆衰者，时世异耶？人将失之耶？岐伯对曰：上古之人，其知道者，法于阴阳，和于术数，食饮有节，起居有常，不妄作劳，故能形与神俱，而尽终其天年，度百岁乃去。今时之人不然也，以酒为浆，以妄为常，醉以入房，以欲竭其精，以耗散其真，不知持满，不时御神，务快其心，逆于生乐，起居无节，故半百而衰也。' },
                    { title: '四气调神大论篇第二', content: '春三月，此为发陈。天地俱生，万物以荣，夜卧早起，广步于庭，被发缓形，以使志生，生而勿杀，予而勿夺，赏而勿罚，此春气之应，养生之道也；逆之则伤肝，夏为寒变，奉长者少。夏三月，此为蕃秀。天地气交，万物华实，夜卧早起，无厌于日，使志勿怒，使华英成秀，使气得泄，若所爱在外，此夏气之应，养长之道也；逆之则伤心，秋为痎疟，奉收者少，冬至重病。' },
                    { title: '生气通天论篇第三', content: '黄帝曰：夫自古通天者，生之本，本于阴阳。天地之间，六合之内，其气九州、九窍、五脏十二节，皆通乎天气。其生五，其气三，数犯此者，则邪气伤人，此寿命之本也。苍天之气，清净则志意治，顺之则阳气固，虽有贼邪，弗能害也，此因时之序。故圣人传精神，服天气而通神明。失之则内闭九窍，外壅肌肉，卫气散解，此谓自伤，气之削也。' },
                    { title: '金匮真言论篇第四', content: '黄帝问曰：天有八风，经有五风，何谓？岐伯对曰：八风发邪以为经风，触五脏，邪气发病。所谓得四时之胜者，春胜长夏，长夏胜冬，冬胜夏，夏胜秋，秋胜春，所谓四时之胜也。东风生于春，病在肝，俞在颈项；南风生于夏，病在心，俞在胸胁；西风生于秋，病在肺，俞在肩背；北风生于冬，病在肾，俞在腰股；中央为土，病在脾，俞在脊。' },
                    { title: '阴阳应象大论篇第五', content: '黄帝曰：阴阳者，天地之道也，万物之纲纪，变化之父母，生杀之本始，神明之府也，治病必求于本。故积阳为天，积阴为地。阴静阳躁，阳生阴长，阳杀阴藏。阳化气，阴成形。寒极生热，热极生寒。寒气生浊，热气生清。清气在下，则生飧泄；浊气在上，则生(月真)胀。此阴阳反作，病之逆从也。' },
                    // ... 继续添加更多章节
                ],
                description: '中医学经典，分素问和灵枢两部分，各81篇，为中医理论奠基之作'
            },
            '弟子规': {
                chapters: [
                    { title: '总叙', content: '弟子规，圣人训。首孝悌，次谨信。泛爱众，而亲仁。有余力，则学文。' },
                    { title: '入则孝', content: '父母呼，应勿缓。父母命，行勿懒。父母教，须敬听。父母责，须顺承。冬则温，夏则清。晨则省，昏则定。出必告，反必面。居有常，业无变。' },
                    { title: '出则悌', content: '兄道友，弟道恭。兄弟睦，孝在中。财物轻，怨何生。言语忍，忿自泯。或饮食，或坐走。长者先，幼者后。长呼人，即代叫。人不在，己即到。' },
                    { title: '谨', content: '朝起早，夜眠迟。老易至，惜此时。晨必盥，兼漱口。便溺回，辄净手。冠必正，纽必结。袜与履，俱紧切。置冠服，有定位。勿乱顿，致污秽。' },
                    { title: '信', content: '凡出言，信为先。诈与妄，奚可焉。话说多，不如少。惟其是，勿佞巧。奸巧语，秽污词。市井气，切戒之。见未真，勿轻言。知未的，勿轻传。' },
                    { title: '泛爱众', content: '凡是人，皆须爱。天同覆，地同载。行高者，名自高。人所重，非貌高。才大者，望自大。人所服，非言大。己有能，勿自私。人所能，勿轻訾。' },
                    { title: '亲仁', content: '同是人，类不齐。流俗众，仁者希。果仁者，人多畏。言不讳，色不媚。能亲仁，无限好。德日进，过日少。不亲仁，无限害。小人进，百事坏。' },
                    { title: '余力学文', content: '不力行，但学文。长浮华，成何人。但力行，不学文。任己见，昧理真。读书法，有三到。心眼口，信皆要。方读此，勿慕彼。此未终，彼勿起。' }
                ],
                description: '清代李毓秀编著，传统蒙学教育的重要经典'
            },
            '诫子书': {
                chapters: [
                    { title: '诫子书', content: '夫君子之行，静以修身，俭以养德。非淡泊无以明志，非宁静无以致远。夫学须静也，才须学也，非学无以广才，非志无以成学。淫慢则不能励精，险躁则不能冶性。年与时驰，意与日去，遂成枯落，多不接世，悲守穷庐，将复何及！' }
                ],
                description: '三国时期诸葛亮的家书，教导儿子修身养性的智慧'
            },
            '大学': {
                chapters: [
                    { title: '第一章', content: '大学之道，在明明德，在亲民，在止于至善。知止而后有定，定而后能静，静而后能安，安而后能虑，虑而后能得。物有本末，事有终始，知所先后，则近道矣。' },
                    { title: '第二章', content: '古之欲明明德于天下者，先治其国；欲治其国者，先齐其家；欲齐其家者，先修其身；欲修其身者，先正其心；欲正其心者，先诚其意；欲诚其意者，先致其知；致知在格物。物格而后知至，知至而后意诚，意诚而后心正，心正而后身修，身修而后家齐，家齐而后国治，国治而后天下平。' },
                    { title: '第三章', content: '《康诰》曰："克明德。"《大甲》曰："顾諟天之明命。"《帝典》曰："克明峻德。"皆自明也。汤之《盘铭》曰："苟日新，日日新，又日新。"《康诰》曰："作新民。"《诗》曰："周虽旧邦，其命维新。"是故君子无所不用其极。' },
                    { title: '第四章', content: '《诗》云："邦畿千里，维民所止。"《诗》云："缗蛮黄鸟，止于丘隅。"子曰："于止，知其所止，可以人而不如鸟乎？"《诗》云："穆穆文王，于缉熙敬止。"为人君，止于仁；为人臣，止于敬；为人子，止于孝；为人父，止于慈；与国人交，止于信。' },
                    { title: '第五章', content: '《诗》云："瞻彼淇澳，菉竹猗猗。有斐君子，如切如磋，如琢如磨。瑟兮僩兮，赫兮喧兮。有斐君子，终不可喧兮。""如切如磋"者，道学也。"如琢如磨"者，自修也。"瑟兮僩兮"者，恂栗也。"赫兮喧兮"者，威仪也。"有斐君子，终不可喧兮"者，道盛德至善，民之不能忘也。' }
                ],
                description: '儒家经典，《四书》之一，阐述儒家修身齐家治国平天下的思想'
            },
            '太上感应篇': {
                chapters: [
                    { title: '第一章', content: '太上曰：祸福无门，唯人自召。善恶之报，如影随形。是道则进，非道则退。不履邪径，不欺暗室。积德累功，慈心于物。忠孝友悌，正己化人。矜孤恤寡，敬老怀幼。昆虫草木，犹不可伤。宜悯人之凶，乐人之善，济人之急，救人之危。见人之得，如己之得。见人之失，如己之失。不彰人短，不炫己长。遏恶扬善，推多取少。受辱不怨，受宠若惊。施恩不求报，与人不追悔。' },
                    { title: '第二章', content: '所谓善人，人皆敬之，天道佑之，福禄随之，众邪远之，神灵卫之，所作必成，神仙可冀。欲求天仙者，当立一千三百善；欲求地仙者，当立三百善。苟或非义而动，背理而行。以恶为能，忍作残害。阴贼良善，暗欺君亲。慢其先生，叛其所事。诳诸无识，谤诸同学。虚诬诈伪，攻讦宗亲。刚强不仁，狠戾自用。' },
                    { title: '第三章', content: '是非不当，向背乖宜。虐下取功，谄上希旨。受恩不感，念怨不休。轻蔑天民，扰乱国政。赏及非义，刑及无辜。杀人取货，倾人取位。诛降戮服，贬正排贤。凌孤逼寡，弃法受曲。以直为曲，以曲为直。入轻为重，见杀加怒。知过不改，见善不为。自罪引他，壅塞方术。讪谤圣贤，侵凌道德。' },
                    { title: '第四章', content: '射飞逐走，发蛰惊栖，填穴覆巢，伤胎破卵。愿人有失，毁人成功。危人自安，减人自益。以恶易好，以私废公。窃人之能，蔽人之善。形人之丑，讦人之私。耗人货财，离人骨肉。侵人所爱，助人为非。逞志作威，辱人求胜。败人苗稼，破人婚姻。苟富而骄，苟免无耻。' },
                    { title: '第五章', content: '认恩推过，嫁祸卖恶。沽买虚誉，包贮险心。挫人所长，护己所短。乘威迫胁，纵暴杀伤。无故剪裁，非礼烹宰。散弃五谷，劳扰众生。破人之家，取其财宝。决水放火，以害民居。紊乱规模，以败人功。损人器物，以穷人用。见他荣贵，愿他流贬。见他富有，愿他破散。' },
                    // ... 继续添加更多章节
                ],
                description: '道教经典，阐述因果报应思想，劝人行善积德'
            },
            '孝经': {
                chapters: [
                    { title: '开宗明义章第一', content: '仲尼居，曾子侍。子曰："先王有至德要道，以顺天下，民用和睦，上下无怨。汝知之乎？"曾子避席曰："参不敏，何足以知之？"子曰："夫孝，德之本也，教之所由生也。复坐，吾语汝。身体发肤，受之父母，不敢毁伤，孝之始也。立身行道，扬名于后世，以显父母，孝之终也。夫孝，始于事亲，中于事君，终于立身。"' },
                    { title: '天子章第二', content: '子曰："爱亲者，不敢恶于人；敬亲者，不敢慢于人。爱敬尽于事亲，而德教加于百姓，刑于四海。盖天子之孝也。《甫刑》云：'一人有庆，兆民赖之。'"' },
                    { title: '诸侯章第三', content: '在上不骄，高而不危；制节谨度，满而不溢。高而不危，所以长守贵也；满而不溢，所以长守富也。富贵不离其身，然后能保其社稷，而和其民人。盖诸侯之孝也。《诗》云：'战战兢兢，如临深渊，如履薄冰。'"' },
                    { title: '卿大夫章第四', content: '非先王之法服不敢服，非先王之法言不敢道，非先王之德行不敢行。是故非法不言，非道不行；口无择言，身无择行；言满天下无口过，行满天下无怨恶。三者备矣，然后能守其宗庙。盖卿大夫之孝也。《诗》云：'夙夜匪懈，以事一人。'"' },
                    { title: '士章第五', content: '资于事父以事母，而爱同；资于事父以事君，而敬同。故母取其爱，而君取其敬，兼之者父也。故以孝事君则忠，以敬事长则顺。忠顺不失，以事其上，然后能保其禄位，而守其祭祀。盖士之孝也。《诗》云：'夙兴夜寐，无忝尔所生。'"' },
                    // ... 继续添加更多章节
                ],
                description: '儒家经典，阐述孝道思想，为儒家孝道经典'
            }
        };

        // 初始化应用
        document.addEventListener('DOMContentLoaded', function() {
            // 如果没有书籍，添加默认经典书籍
            if (books.length === 0) {
                addDefaultBooks();
            } else {
                renderBooks();
            }
            updateEmptyState();
        });

        // 添加默认书籍
        function addDefaultBooks() {
            Object.entries(classicDatabase).forEach(([bookName, bookData]) => {
                const newBook = {
                    id: Date.now() + Math.random(),
                    name: bookName,
                    description: bookData.description,
                    chapters: bookData.chapters.map((chapter, index) => ({
                        id: index + 1,
                        title: chapter.title,
                        content: chapter.content,
                        readCount: 0,
                        completed: false,
                        reReadCount: 0
                    }))
                };
                books.push(newBook);
            });
            saveData();
            renderBooks();
        }

        // 渲染书籍列表
        function renderBooks() {
            const bookGrid = document.getElementById('book-grid');
            const emptyState = document.getElementById('empty-state');
            
            if (books.length === 0) {
                bookGrid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            bookGrid.style.display = 'grid';
            emptyState.style.display = 'none';

            bookGrid.innerHTML = books.map(book => {
                const totalChapters = book.chapters.length;
                const completedChapters = book.chapters.filter(ch => ch.completed).length;
                const progress = totalChapters > 0 ? Math.round((completedChapters / totalChapters) * 100) : 0;

                return `
                    <div class="book-card" onclick="showBook('${book.id}')">
                        <div class="book-actions">
                            <button class="book-action-btn" onclick="event.stopPropagation(); editBook('${book.id}')">✏️ 编辑</button>
                            <button class="book-action-btn" onclick="event.stopPropagation(); deleteBook('${book.id}')">🗑️ 删除</button>
                        </div>
                        <div class="book-title">${book.name}</div>
                        <div class="book-description">${book.description}</div>
                        <div class="book-stats">
                            <span>📖 ${totalChapters} 章</span>
                            <span>✅ ${completedChapters} 章</span>
                            <span>📊 ${progress}%</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // 显示书籍
        function showBook(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;

            currentBook = book;
            currentChapterIndex = 0;
            currentChapter = book.chapters[0];
            reReading = false;

            // 更新UI
            document.getElementById('current-book-title').textContent = book.name;
            document.getElementById('current-book-title').style.display = 'block';
            document.getElementById('chapter-info').style.display = 'block';
            document.getElementById('chapter-nav').style.display = 'flex';
            document.getElementById('chapter-content').style.display = 'block';
            document.getElementById('reading-progress').style.display = 'block';
            document.getElementById('stamp-actions').style.display = 'flex';
            document.getElementById('book-grid').style.display = 'none';
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('reading-area').style.display = 'block';

            updateChapterDisplay();
            renderBooks();
            updateReReadStats();
        }

        // 更新章节显示
        function updateChapterDisplay() {
            if (!currentChapter) return;

            // 更新章节信息
            document.getElementById('chapter-title').textContent = currentChapter.title;
            document.getElementById('chapter-subtitle').textContent = `第 ${currentChapterIndex + 1} 章 | 共 ${currentBook.chapters.length} 章`;
            document.getElementById('current-chapter').textContent = `第 ${currentChapterIndex + 1} 章`;
            document.getElementById('total-chapters').textContent = `共 ${currentBook.chapters.length} 章`;

            // 更新章节内容
            document.getElementById('chapter-text').textContent = currentChapter.content;

            // 更新进度
            updateProgress();

            // 更新按钮状态
            const stampButton = document.getElementById('stamp-button');
            const reReadButton = document.getElementById('re-read-button');
            
            if (currentChapter.readCount >= 100) {
                stampButton.style.display = 'none';
                reReadButton.style.display = currentChapter.reReadCount > 0 ? 'inline-block' : 'inline-block';
                reReadButton.textContent = currentChapter.reReadCount > 0 ? '🔄 继续重读' : '🔄 开始重读';
            } else {
                stampButton.style.display = 'inline-block';
                reReadButton.style.display = 'none';
            }

            // 更新导航按钮状态
            document.getElementById('prev-chapter').disabled = currentChapterIndex === 0;
            document.getElementById('next-chapter').disabled = currentChapterIndex === currentBook.chapters.length - 1;
        }

        // 导航章节
        function navigateChapter(direction) {
            const newIndex = currentChapterIndex + direction;
            if (newIndex >= 0 && newIndex < currentBook.chapters.length) {
                currentChapterIndex = newIndex;
                currentChapter = currentBook.chapters[currentChapterIndex];
                updateChapterDisplay();
            }
        }

        // 标记已读
        function addStamp() {
            if (!currentChapter) return;

            if (!reReading) {
                currentChapter.readCount++;
                if (currentChapter.readCount >= 100) {
                    currentChapter.completed = true;
                    showCelebration();
                }
            } else {
                currentChapter.reReadCount++;
            }

            saveData();
            updateChapterDisplay();
            renderBooks();
            updateReReadStats();
        }

        // 开始重读
        function startReReading() {
            reReading = true;
            document.getElementById('stamp-button').textContent = '📝 重读印章';
            document.getElementById('re-read-button').style.display = 'none';
        }

        // 更新进度
        function updateProgress() {
            const totalChapters = currentBook.chapters.length;
            const completedChapters = currentBook.chapters.filter(ch => ch.completed).length;
            const progress = totalChapters > 0 ? Math.round((completedChapters / totalChapters) * 100) : 0;

            document.getElementById('progress-fill').style.width = progress + '%';
            document.getElementById('progress-text').textContent = 
                `总进度：${completedChapters}/${totalChapters} 章完成 (${progress}%)`;
        }

        // 更新重读统计
        function updateReReadStats() {
            // 这里可以添加重读统计的显示逻辑
        }

        // 显示庆祝动画
        function showCelebration() {
            const celebration = document.getElementById('celebration');
            celebration.classList.add('show');
            
            setTimeout(() => {
                celebration.classList.remove('show');
            }, 3000);
        }

        // 显示书籍列表
        function showBookList() {
            document.getElementById('reading-area').style.display = 'none';
            document.getElementById('book-grid').style.display = 'grid';
            document.getElementById('empty-state').style.display = 'none';
        }

        // 模态框操作
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.getElementById('book-name').value = '';
            document.getElementById('book-content').value = '';
        }

        // 添加书籍
        function addBook() {
            const name = document.getElementById('book-name').value.trim();
            const content = document.getElementById('book-content').value.trim();

            if (!name || !content) {
                alert('请填写完整的书籍名称和内容');
                return;
            }

            // 生成章节
            const chapters = autoChapters(content);

            // 创建新书籍
            const newBook = {
                id: Date.now() + Math.random(),
                name: name,
                description: '用户添加的书籍',
                chapters: chapters.map((chapter, index) => ({
                    id: index + 1,
                    title: chapter.title || `第 ${index + 1} 章`,
                    content: chapter.content,
                    readCount: 0,
                    completed: false,
                    reReadCount: 0
                }))
            };

            books.push(newBook);
            saveData();
            renderBooks();
            closeModal('add-book-modal');

            // 自动选择新添加的书籍
            showBook(newBook.id);
        }

        // 智能分章功能
        function autoChapters(content) {
            const chapters = [];
            
            // 检查是否包含手动分章标记
            if (content.includes('-----') || content.includes('---') || content.includes('=====') || content.includes('===')) {
                // 手动分章模式：按分隔符分割
                const sections = content.split(/-----+|===+/).filter(s => s.trim().length > 0);
                
                sections.forEach((section, index) => {
                    const trimmedSection = section.trim();
                    if (trimmedSection) {
                        chapters.push({
                            id: index + 1,
                            title: `第 ${index + 1} 章`,
                            content: trimmedSection,
                            readCount: 0,
                            completed: false
                        });
                    }
                });
                
                return chapters;
            }
            
            // 自动分章模式：按句子分章
            const sentences = content.split(/[。！？；.!?\n\r]/).filter(s => s.trim().length > 0);
            let currentChapter = '';
            let chapterCount = 1;
            
            for (let i = 0; i < sentences.length; i++) {
                const sentence = sentences[i].trim();
                if (!sentence) continue;
                
                // 添加句号（如果没有的话）
                const formattedSentence = sentence.match(/[。！？.!?]$/) ? sentence : sentence + '。';
                currentChapter += formattedSentence;
                
                // 每3-5句组成一章，或遇到明显分章标记
                if ((i + 1) % 4 === 0 || sentence.includes('第') || sentence.includes('章') || sentence.includes('section') || sentence.includes('Chapter')) {
                    chapters.push({
                        id: chapterCount++,
                        title: `第 ${chapters.length + 1} 章`,
                        content: currentChapter,
                        readCount: 0,
                        completed: false
                    });
                    currentChapter = '';
                }
            }
            
            // 如果最后还有内容，作为最后一章
            if (currentChapter.trim()) {
                chapters.push({
                    id: chapterCount,
                    title: `第 ${chapters.length + 1} 章`,
                    content: currentChapter,
                    readCount: 0,
                    completed: false
                });
            }
            
            return chapters.length > 0 ? chapters : [{
                id: 1,
                title: '第一章',
                content: content,
                readCount: 0,
                completed: false
            }];
        }

        // 更新空状态显示
        function updateEmptyState() {
            const emptyState = document.getElementById('empty-state');
            const bookGrid = document.getElementById('book-grid');
            
            if (books.length === 0) {
                emptyState.style.display = 'block';
                bookGrid.style.display = 'none';
            } else {
                emptyState.style.display = 'none';
                bookGrid.style.display = 'grid';
            }
        }

        // 保存数据
        function saveData() {
            localStorage.setItem('books', JSON.stringify(books));
        }

        // 编辑书籍
        function editBook(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;

            const newName = prompt('请输入新的书籍名称：', book.name);
            if (newName && newName.trim()) {
                book.name = newName.trim();
                saveData();
                renderBooks();
                if (currentBook && currentBook.id === bookId) {
                    document.getElementById('current-book-title').textContent = book.name;
                }
            }
        }

        // 删除书籍
        function deleteBook(bookId) {
            if (confirm('确定要删除这本书吗？此操作不可撤销。')) {
                books = books.filter(b => b.id !== bookId);
                saveData();
                renderBooks();
                updateEmptyState();

                // 如果删除的是当前书籍，返回书籍列表
                if (currentBook && currentBook.id === bookId) {
                    showBookList();
                }
            }
        }

        // 点击模态框外部关闭
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>